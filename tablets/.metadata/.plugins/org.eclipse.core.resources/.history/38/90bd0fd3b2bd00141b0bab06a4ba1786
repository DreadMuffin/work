package com.example.historie;

import android.app.ActionBar.LayoutParams;
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.view.Gravity;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.LinearLayout;
import android.widget.PopupWindow;
import android.widget.TextView;
import android.view.View.OnClickListener;

public class Historie extends Activity {

	Button button_1;
	Button button_2;
	Button button_3;

	@Override
	protected void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);
		setContentView(R.layout.activity_historie);

		// final Button button = (Button) findViewById(R.id.button_1);

		button_1 = (Button) findViewById(R.id.button_1);
		button_2 = (Button) findViewById(R.id.button_2);
		button_3 = (Button) findViewById(R.id.button_3);

		button_1.setOnClickListener(new View.OnClickListener() {

			@Override
			public void onClick(View v) {
				initiatePopupWindow(1);
			}

		});

		button_2.setOnClickListener(new View.OnClickListener() {

			@Override
			public void onClick(View v) {
				initiatePopupWindow(2);
			}
		});

		button_3.setOnClickListener(new View.OnClickListener() {

			@Override
			public void onClick(View v) {
				initiatePopupWindow(3);
			}
		});

	}

	private PopupWindow pwindo;

	private void initiatePopupWindow(int i) {
		try {
			// We need to get the instance of the LayoutInflater
			LayoutInflater inflater = (LayoutInflater) Historie.this
					.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

			if (i == 1) {

				View layout = inflater.inflate(R.layout.popup1,
						(ViewGroup) findViewById(R.id.popup_element1));
				pwindo = new PopupWindow(layout, LayoutParams.MATCH_PARENT,
						LayoutParams.MATCH_PARENT, true);
				pwindo.showAtLocation(layout, Gravity.CENTER, 0, 0);
				inflator.setCancelable(true);

				button_1 = (Button) layout.findViewById(R.id.btn_close_popup);
				button_1.setOnClickListener(cancel_button_click_listener);

			} else if (i == 2) {
				View layout = inflater.inflate(R.layout.popup2,
						(ViewGroup) findViewById(R.id.popup_element2));
				pwindo = new PopupWindow(layout, LayoutParams.MATCH_PARENT,
						LayoutParams.MATCH_PARENT, true);
				pwindo.showAtLocation(layout, Gravity.CENTER, 0, 0);

				button_1 = (Button) layout.findViewById(R.id.btn_close_popup);
				button_1.setOnClickListener(cancel_button_click_listener);

			} else {
				View layout = inflater.inflate(R.layout.popup3,
						(ViewGroup) findViewById(R.id.popup_element3));
				pwindo = new PopupWindow(layout, LayoutParams.MATCH_PARENT,
						LayoutParams.MATCH_PARENT, true);
				pwindo.showAtLocation(layout, Gravity.CENTER, 0, 0);

				button_1 = (Button) layout.findViewById(R.id.btn_close_popup);
				button_1.setOnClickListener(cancel_button_click_listener);

			}

		} catch (Exception e) {
			e.printStackTrace();
		}
	}

	private OnClickListener cancel_button_click_listener = new OnClickListener() {
		public void onClick(View v) {
			pwindo.dismiss();

		}
	};

	@Override
	public boolean onCreateOptionsMenu(Menu menu) {
		// Inflate the menu; this adds items to the action bar if it is present.
		getMenuInflater().inflate(R.menu.historie, menu);
		return true;
	}

}
